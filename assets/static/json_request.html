<html>
<head>
    <title>Click link to send JSON</title>
</head>
<body>

<div id="post"></div>

<a href="#" onclick="sendJSON(getJSON())">Send Original JSON!</a>
<div id="pre"></div>

<script>

    var acc = "<pre>";
    acc += JSON.stringify(getJSON(), null, " ");
    acc += "</pre>";

    document.getElementById("pre").innerHTML = acc;

    function sendJSON(json){

        var ajax = new XMLHttpRequest();
        ajax.open("POST", "/organize");
        ajax.setRequestHeader("Content-Type", "application/json;charset=UTF-8");
        ajax.send(JSON.stringify(json));
        ajax.addEventListener("load", function(event){finished(event);}, false);

        console.log("Sent Data" + json);
    }

    function finished(e){
        console.log("finished: " + e.target.responseText);

        var acc = "Server responed with: <br>";
        acc += "<pre>";
        acc += JSON.stringify(JSON.parse(e.target.responseText), null, " "); // clean it
        acc += "</pre>";

        document.getElementById("post").innerHTML = acc;
    }

    function getJSON(){
        return {"0":
            [{"id": 10,
                "title": "House",
                "level": 0,
                "children": [],
                "parent_id": null}],
            "1":
                [{"id": 12,
                    "title": "Red Roof",
                    "level": 1,
                    "children": [],
                    "parent_id": 10},
                    {"id": 18,
                        "title": "Blue Roof",
                        "level": 1,
                        "children": [],
                        "parent_id": 10},
                    {"id": 13,
                        "title": "Wall",
                        "level": 1,
                        "children": [],
                        "parent_id": 10}],
            "2":
                [{"id": 17,
                    "title": "Blue Window",
                    "level": 2,
                    "children": [],
                    "parent_id": 12},
                    {"id": 16,
                        "title": "Door",
                        "level": 2,
                        "children": [],
                        "parent_id": 13},
                    {"id": 15,
                        "title": "Red Window",
                        "level": 2,
                        "children": [],
                        "parent_id": 12}]}

    }

</script>

</body>
</html>